---
classes:
  - apbackup
  - apbackup::backup
  - blocky
  - datadog_asf::integrations::network
  - loggy
  - rootbin_asf
  - rsync
  - rsync::server
  - rsync_mirror
  - svnwcsub

  cron:
    # mirmon timestamp etc
    mirmon:
      user: 'svnwc'
      minute: [0,30]
      hour: '*'
      command: 'cd /dist && /bin/bash -c "TIME=zzz/time.txt && FIND=zzz/find-ls.gz && echo `/bin/date '+%s'` `/bin/hostname` > $TIME.tmp &&  mv -f $TIME.tmp $TIME &&  find . \( -name .svn -prune \) -o -ls | gzip -c > $FIND.tmp && mv -f $FIND.tmp $FIND"'

rsync::package_ensure:                       'latest'
rsync::server::use_xinetd:                   false
rsync::server::gid:                          'nogroup' # group 'nobody' doesn't exist in ubuntu

svnwcsub::gid:                               '9997'
svnwcsub::uid:                               '9997'
svnwcsub::conf_file:                         'svnwcsub.conf.dist'
svnwcsub::conf_path:                         '/etc/'
svnwcsub::groupname:                         'svnwc'
svnwcsub::groups:
  - 'svnwc'
svnwcsub::service_ensure:                    'running'
svnwcsub::service_name:                      'svnwcsub'
svnwcsub::shell:                             '/bin/bash'
svnwcsub::username:                          'svnwc'
